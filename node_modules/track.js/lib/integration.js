// Generated by CoffeeScript 1.11.1
var Integration, loadIframe, loadImg, loadScript, sample;

loadIframe = require('./loaders/iframe');

loadImg = require('./loaders/img');

loadScript = require('./loaders/script');

sample = require('./sample');

module.exports = Integration = (function() {
  function Integration() {}

  Integration.prototype.init = function() {};

  Integration.prototype.name = function() {
    return this.opts.type;
  };

  Integration.prototype.sample = function() {
    if (this.opts.sample != null) {
      return sample(this.name(), this.opts.sample);
    }
    return true;
  };

  Integration.prototype.load = function(cb) {
    if (cb == null) {
      cb = function() {};
    }
    if (!((this.src != null) && (this.src.type != null) && (this.src.url != null))) {
      return;
    }
    this.log('load', this.src);
    switch (this.src.type) {
      case 'script':
        switch (typeof this.src.url) {
          case 'object':
            if (window.location.protocol === 'https:') {
              this.src.url = this.src.url.https;
            } else {
              this.src.url = this.src.url.http;
            }
            break;
          case 'function':
            this.src.url = this.src.url.call(this);
        }
        return loadScript(this.src, cb);
      case 'img':
        return loadImg(this.src, cb);
      case 'iframe':
        return loadIframe(this.src, cb);
    }
  };

  return Integration;

})();

//# sourceMappingURL=integration.js.map
