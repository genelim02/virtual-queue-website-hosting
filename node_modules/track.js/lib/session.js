// Generated by CoffeeScript 1.11.1
var cookies, document, localStorage, ref, ref1, safariPrivateBrowsing, tld, window;

ref = require('./utils'), safariPrivateBrowsing = ref.safariPrivateBrowsing, tld = ref.tld;

ref1 = require('./browser'), document = ref1.document, window = ref1.window;

localStorage = function() {
  return require('store');
};

cookies = function() {
  var domain, key, state;
  cookies = (require('cookies-js'))(window);
  domain = tld(document.domain);
  key = '_hza';
  state = function() {
    var value;
    value = cookies.get(key);
    if (value != null) {
      return JSON.parse(value);
    } else {
      return {};
    }
  };
  return {
    get: function(k) {
      return state()[k];
    },
    set: function(k, v) {
      var s;
      s = state();
      s[k] = v;
      return cookies.set(key, JSON.stringify(s, {
        domain: domain,
        secure: true,
        expires: 2e308
      }));
    },
    remove: function(k) {
      return this.set(k, void 0);
    },
    clear: function() {
      return cookies.expire(key);
    }
  };
};

module.exports = safariPrivateBrowsing() ? cookies() : localStorage();

//# sourceMappingURL=session.js.map
