// Generated by CoffeeScript 1.11.1
var Identity, session, uuid;

session = require('./session');

uuid = require('./utils').uuid;

Identity = (function() {
  function Identity() {
    var k, props, ref, v;
    props = (ref = session.get('identity')) != null ? ref : {};
    for (k in props) {
      v = props[k];
      this[k] = v;
    }
    if (!((this.userId != null) || (this.anonId != null))) {
      this.anonId = uuid();
    }
  }

  Identity.prototype.set = function(k, v) {
    var traits;
    traits = identity();
    traits[k] = v;
    return session.set('identity', traits);
  };

  Identity.prototype.clear = function() {
    return session.remove('identity');
  };

  Identity.prototype.id = function() {
    var ref;
    return (ref = this.userId) != null ? ref : this.anonId;
  };

  return Identity;

})();

module.exports = new Identity;

//# sourceMappingURL=identity.js.map
